# 測試文件功能說明

## 目錄結構

```
backend/attack/
├── auth/                          # 認證模組測試
│   ├── auth_bruteforce_attack.py
│   ├── auth_session_attack.py
│   └── auth_sql_injection_attack.py
├── sql/                           # SQL 注入測試
│   ├── test_query_injection.py
│   ├── test_update_injection.py
│   ├── test_insert_injection.py
│   ├── test_delete_injection.py
│   └── test_security_monitoring.py
└── run_sql_security_tests.py      # 主測試運行程序
```

---

## Auth 模組測試 (auth/)

### auth_bruteforce_attack.py
**功能：** 測試系統對暴力破解攻擊的防護能力
- 使用常見弱密碼列表進行暴力破解測試
- 測試登入端點的速率限制機制
- 驗證系統是否正確記錄失敗的登入嘗試

### auth_session_attack.py
**功能：** 測試 session 管理安全性
- Session 固定攻擊測試
- Session 重放攻擊測試
- 過期 session 攻擊測試
- 無效 token 攻擊測試

### auth_sql_injection_attack.py
**功能：** 測試登入端點的 SQL 注入防護
- OR 注入測試
- 註釋注入測試
- UNION 注入測試
- 布林注入測試
- 時間盲注測試
- 堆疊查詢測試
- 雙引號注入測試

---

## SQL 注入測試 (sql/)

### test_query_injection.py
**功能：** 測試查詢端點 (`/performQuery`) 的 SQL 注入防護
- Filter 值注入（OR、UNION、註釋）
- Table name 注入
- Column name 注入
- Operator 注入
- LIKE 注入
- IN 注入

### test_update_injection.py
**功能：** 測試更新端點 (`/data/update`) 的 SQL 注入防護
- 更新值注入（OR、註釋、堆疊）
- Table name 注入
- Column name 注入
- Primary key 注入

### test_insert_injection.py
**功能：** 測試插入端點 (`/data/insert`) 的 SQL 注入防護
- 插入值注入（OR、註釋、堆疊）
- Table name 注入
- Column name 注入

### test_delete_injection.py
**功能：** 測試刪除端點 (`/data/delete`) 的 SQL 注入防護
- Primary key 注入（OR、註釋、堆疊）
- Table name 注入
- Key column name 注入

### test_security_monitoring.py
**功能：** 測試安全監控和日誌記錄功能
- 驗證 SQL 注入嘗試是否被記錄
- 檢查日誌文件是否正確記錄安全事件
- 測試登入和查詢端點的安全監控

---

## 主測試程序

### run_sql_security_tests.py
**功能：** 運行所有 SQL 安全測試的主程序
- 整合所有端點測試（查詢、更新、插入、刪除）
- 整合安全監控測試
- 生成測試報告
- 支援命令行參數（URL、用戶憑證、輸出文件）

---

## 測試用戶

所有測試使用以下測試用戶：

- **Student**: `test_student@example.com` / `StudentTest123`
- **Guardian**: `test_guardian@example.com` / `GuardianTest123`
- **Staff**: `test_staff@example.com` / `StaffTest123`

詳細資訊請參考 `TEST_USERS.md`

---

## 測試狀態說明

- **PROTECTED** ✅ - 系統成功阻止攻擊（期望結果）
- **VULNERABLE** ❌ - 系統未能阻止攻擊（需要修復）
- **UNKNOWN** ⚠️ - 無法確定狀態
- **ERROR** ⚠️ - 測試過程發生錯誤
- **TIMEOUT** ⚠️ - 請求超時
- **MONITORED** ✅ - 安全事件被記錄（安全監控測試）

---

